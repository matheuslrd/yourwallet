{"ast":null,"code":"var _jsxFileName = \"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/your-wallet/src/pages/Wallet.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Header from '../Components/Header';\nimport Form from '../Components/Form';\nimport Table from '../Components/Table';\nimport { addCurrencies, addExpenses, updateTotalExpenses } from '../actions';\nimport './wallet.css';\n\nclass Wallet extends Component {\n  constructor() {\n    super();\n    this.updateTotalValue = this.updateTotalValue.bind(this);\n    this.handleAddExpenses = this.handleAddExpenses.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.state = {\n      value: '',\n      description: '',\n      currency: 'USD',\n      method: 'Dinheiro',\n      tag: 'Alimentação'\n    };\n  }\n\n  componentDidMount() {\n    this.fetchingValuesCurrencys();\n  }\n\n  async fetchingValuesCurrencys() {\n    const {\n      addCurrenciesDispatch\n    } = this.props;\n    const fetching = await fetch('https://economia.awesomeapi.com.br/json/all');\n    const fetchingJson = await fetching.json();\n    const currencies = Object.keys(fetchingJson).filter(currency => currency !== 'USDT');\n    addCurrenciesDispatch(currencies);\n    return fetchingJson;\n  }\n\n  handleChange({\n    target: {\n      name,\n      value\n    }\n  }) {\n    this.setState({\n      [name]: value\n    });\n  }\n\n  async handleAddExpenses() {\n    const {\n      state,\n      props: {\n        addExpensesDispatch,\n        expenses\n      },\n      state: {\n        currencyCoin\n      }\n    } = this;\n    const currencys = await this.fetchingValuesCurrencys();\n    addExpensesDispatch({\n      id: expenses.length,\n      ...state,\n      exchangeRates: { ...currencys\n      }\n    });\n    this.updateTotalValue(currencys, currencyCoin);\n  }\n\n  updateTotalValue(currencys) {\n    const {\n      value,\n      currency\n    } = this.state;\n    const {\n      updateTotalExpensesDispatch,\n      totalExpenses\n    } = this.props;\n    const valueCoinSelected = currencys[currency].ask;\n    const valueMultiplyCoinSelected = Number((value * valueCoinSelected).toFixed([2]));\n    updateTotalExpensesDispatch(totalExpenses + valueMultiplyCoinSelected);\n  }\n\n  mapExpenses() {\n    const {\n      expenses\n    } = this.props;\n    return expenses.map(expense => /*#__PURE__*/React.createElement(Table, {\n      key: expense.id,\n      expense: expense,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 38\n      }\n    }));\n  }\n\n  render() {\n    const {\n      props: {\n        email,\n        currencies,\n        totalExpenses\n      },\n      state: {\n        value,\n        description,\n        currency,\n        method,\n        tag\n      }\n    } = this;\n    return /*#__PURE__*/React.createElement(\"main\", {\n      className: \"wallet-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      email: email,\n      totalExpenses: totalExpenses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"container-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      currencies: currencies,\n      onChange: this.handleChange,\n      value: value,\n      description: description,\n      currency: currency,\n      method: method,\n      tag: tag,\n      onClick: this.handleAddExpenses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"tables-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, this.mapExpenses()));\n  }\n\n}\n\nWallet.propTypes = {\n  email: PropTypes.string.isRequired,\n  expenses: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  currencies: PropTypes.arrayOf(PropTypes.string).isRequired,\n  totalExpenses: PropTypes.number.isRequired,\n  addExpensesDispatch: PropTypes.func.isRequired,\n  addCurrenciesDispatch: PropTypes.func.isRequired,\n  updateTotalExpensesDispatch: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  email: state.user.email,\n  expenses: state.wallet.expenses,\n  currencies: state.wallet.currencies,\n  totalExpenses: state.wallet.totalExpenses\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addExpensesDispatch: state => dispatch(addExpenses(state)),\n  addCurrenciesDispatch: currencies => dispatch(addCurrencies(currencies)),\n  updateTotalExpensesDispatch: totalExpenses => dispatch(updateTotalExpenses(totalExpenses))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wallet);","map":{"version":3,"sources":["/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/your-wallet/src/pages/Wallet.jsx"],"names":["React","Component","PropTypes","connect","Header","Form","Table","addCurrencies","addExpenses","updateTotalExpenses","Wallet","constructor","updateTotalValue","bind","handleAddExpenses","handleChange","state","value","description","currency","method","tag","componentDidMount","fetchingValuesCurrencys","addCurrenciesDispatch","props","fetching","fetch","fetchingJson","json","currencies","Object","keys","filter","target","name","setState","addExpensesDispatch","expenses","currencyCoin","currencys","id","length","exchangeRates","updateTotalExpensesDispatch","totalExpenses","valueCoinSelected","ask","valueMultiplyCoinSelected","Number","toFixed","mapExpenses","map","expense","render","email","propTypes","string","isRequired","arrayOf","shape","number","func","mapStateToProps","user","wallet","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Header from '../Components/Header';\nimport Form from '../Components/Form';\nimport Table from '../Components/Table';\nimport { addCurrencies, addExpenses, updateTotalExpenses } from '../actions';\nimport './wallet.css';\n\nclass Wallet extends Component {\n  constructor() {\n    super();\n\n    this.updateTotalValue = this.updateTotalValue.bind(this);\n    this.handleAddExpenses = this.handleAddExpenses.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.state = {\n      value: '',\n      description: '',\n      currency: 'USD',\n      method: 'Dinheiro',\n      tag: 'Alimentação',\n    };\n  }\n\n  componentDidMount() {\n    this.fetchingValuesCurrencys();\n  }\n\n  async fetchingValuesCurrencys() {\n    const { addCurrenciesDispatch } = this.props;\n    const fetching = await fetch('https://economia.awesomeapi.com.br/json/all');\n    const fetchingJson = await fetching.json();\n    const currencies = Object.keys(fetchingJson).filter(\n      (currency) => (currency !== 'USDT'),\n    );\n    addCurrenciesDispatch(currencies);\n    return fetchingJson;\n  }\n\n  handleChange({ target: { name, value } }) {\n    this.setState({ [name]: value });\n  }\n\n  async handleAddExpenses() {\n    const {\n      state,\n      props: { addExpensesDispatch, expenses },\n      state: { currencyCoin },\n    } = this;\n    const currencys = await this.fetchingValuesCurrencys();\n\n    addExpensesDispatch(\n      { id: expenses.length, ...state, exchangeRates: { ...currencys } },\n    );\n    this.updateTotalValue(currencys, currencyCoin);\n  }\n\n  updateTotalValue(currencys) {\n    const { value, currency } = this.state;\n    const { updateTotalExpensesDispatch, totalExpenses } = this.props;\n    const valueCoinSelected = currencys[currency].ask;\n    const valueMultiplyCoinSelected = Number((value * valueCoinSelected).toFixed([2]));\n    updateTotalExpensesDispatch(totalExpenses + valueMultiplyCoinSelected);\n  }\n\n  mapExpenses() {\n    const { expenses } = this.props;\n    return expenses.map((expense) => <Table key={ expense.id } expense={ expense } />);\n  }\n\n  render() {\n    const { props: { email, currencies, totalExpenses }, state: {\n      value,\n      description,\n      currency,\n      method,\n      tag,\n    } } = this;\n\n    return (\n      <main className=\"wallet-page\">\n        <Header email={ email } totalExpenses={ totalExpenses } />\n        <section className=\"container-form\">\n          <Form\n            currencies={ currencies }\n            onChange={ this.handleChange }\n            value={ value }\n            description={ description }\n            currency={ currency }\n            method={ method }\n            tag={ tag }\n            onClick={ this.handleAddExpenses }\n          />\n        </section>\n        <section className=\"tables-container\">\n          { this.mapExpenses() }\n        </section>\n      </main>\n    );\n  }\n}\n\nWallet.propTypes = {\n  email: PropTypes.string.isRequired,\n  expenses: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  currencies: PropTypes.arrayOf(PropTypes.string).isRequired,\n  totalExpenses: PropTypes.number.isRequired,\n  addExpensesDispatch: PropTypes.func.isRequired,\n  addCurrenciesDispatch: PropTypes.func.isRequired,\n  updateTotalExpensesDispatch: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  email: state.user.email,\n  expenses: state.wallet.expenses,\n  currencies: state.wallet.currencies,\n  totalExpenses: state.wallet.totalExpenses,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  addExpensesDispatch: (state) => dispatch(addExpenses(state)),\n  addCurrenciesDispatch: (currencies) => dispatch(addCurrencies(currencies)),\n  updateTotalExpensesDispatch: (totalExpenses) => dispatch(\n    updateTotalExpenses(totalExpenses),\n  ),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wallet);\n"]},"metadata":{},"sourceType":"module"}