{"ast":null,"code":"import _objectSpread from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import Header from'../Components/Header';import Form from'../Components/Form';import Table from'../Components/Table';import{addCurrencies,addExpenses,updateTotalExpenses}from'../actions';import'./wallet.css';var Wallet=/*#__PURE__*/function(_Component){_inherits(Wallet,_Component);var _super=_createSuper(Wallet);function Wallet(){var _this;_classCallCheck(this,Wallet);_this=_super.call(this);_this.updateTotalValue=_this.updateTotalValue.bind(_assertThisInitialized(_this));_this.handleAddExpenses=_this.handleAddExpenses.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.state={value:'',description:'',currency:'USD',method:'Dinheiro',tag:'Alimentação'};return _this;}_createClass(Wallet,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchingValuesCurrencys();}},{key:\"fetchingValuesCurrencys\",value:function(){var _fetchingValuesCurrencys=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var addCurrenciesDispatch,fetching,fetchingJson,currencies;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:addCurrenciesDispatch=this.props.addCurrenciesDispatch;_context.next=3;return fetch('https://economia.awesomeapi.com.br/json/all');case 3:fetching=_context.sent;_context.next=6;return fetching.json();case 6:fetchingJson=_context.sent;currencies=Object.keys(fetchingJson).filter(function(currency){return currency!=='USDT';});addCurrenciesDispatch(currencies);return _context.abrupt(\"return\",fetchingJson);case 10:case\"end\":return _context.stop();}}},_callee,this);}));function fetchingValuesCurrencys(){return _fetchingValuesCurrencys.apply(this,arguments);}return fetchingValuesCurrencys;}()},{key:\"handleChange\",value:function handleChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;this.setState(_defineProperty({},name,value));}},{key:\"handleAddExpenses\",value:function(){var _handleAddExpenses=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var state,_this$props,addExpensesDispatch,expenses,currencys;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:state=this.state,_this$props=this.props,addExpensesDispatch=_this$props.addExpensesDispatch,expenses=_this$props.expenses;_context2.next=3;return this.fetchingValuesCurrencys();case 3:currencys=_context2.sent;addExpensesDispatch(_objectSpread(_objectSpread({id:expenses.length},state),{},{exchangeRates:_objectSpread({},currencys)}));this.updateTotalValue(currencys);case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleAddExpenses(){return _handleAddExpenses.apply(this,arguments);}return handleAddExpenses;}()},{key:\"updateTotalValue\",value:function updateTotalValue(currencys){var _this$state=this.state,value=_this$state.value,currency=_this$state.currency;var _this$props2=this.props,updateTotalExpensesDispatch=_this$props2.updateTotalExpensesDispatch,totalExpenses=_this$props2.totalExpenses;var valueCoinSelected=currencys[currency].ask;var valueMultiplyCoinSelected=Number((value*valueCoinSelected).toFixed([2]));updateTotalExpensesDispatch(totalExpenses+valueMultiplyCoinSelected);}},{key:\"render\",value:function render(){var _this$props3=this.props,email=_this$props3.email,currencies=_this$props3.currencies,totalExpenses=_this$props3.totalExpenses,_this$state2=this.state,value=_this$state2.value,description=_this$state2.description,currency=_this$state2.currency,method=_this$state2.method,tag=_this$state2.tag;return/*#__PURE__*/React.createElement(\"main\",{className:\"wallet-page\"},/*#__PURE__*/React.createElement(Header,{email:email,totalExpenses:totalExpenses}),/*#__PURE__*/React.createElement(\"section\",{className:\"container-form\"},/*#__PURE__*/React.createElement(Form,{currencies:currencies,onChange:this.handleChange,value:value,description:description,currency:currency,method:method,tag:tag,onClick:this.handleAddExpenses})),/*#__PURE__*/React.createElement(\"section\",{className:\"tables-container\"},/*#__PURE__*/React.createElement(Table,null)));}}]);return Wallet;}(Component);function mapStateToProps(state){return{email:state.user.email,expenses:state.wallet.expenses,currencies:state.wallet.currencies,totalExpenses:state.wallet.totalExpenses};}function mapDispatchToProps(dispatch){return{addExpensesDispatch:function addExpensesDispatch(state){return dispatch(addExpenses(state));},addCurrenciesDispatch:function addCurrenciesDispatch(currencies){return dispatch(addCurrencies(currencies));},updateTotalExpensesDispatch:function updateTotalExpensesDispatch(totalExpenses){return dispatch(updateTotalExpenses(totalExpenses));}};}export default connect(mapStateToProps,mapDispatchToProps)(Wallet);","map":{"version":3,"sources":["/home/matheuslrd/Documentos/Projetos-Pessoais/YourWallet/src/pages/Wallet.jsx"],"names":["React","Component","connect","Header","Form","Table","addCurrencies","addExpenses","updateTotalExpenses","Wallet","updateTotalValue","bind","handleAddExpenses","handleChange","state","value","description","currency","method","tag","fetchingValuesCurrencys","addCurrenciesDispatch","props","fetch","fetching","json","fetchingJson","currencies","Object","keys","filter","target","name","setState","addExpensesDispatch","expenses","currencys","id","length","exchangeRates","updateTotalExpensesDispatch","totalExpenses","valueCoinSelected","ask","valueMultiplyCoinSelected","Number","toFixed","email","mapStateToProps","user","wallet","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Header from '../Components/Header';\nimport Form from '../Components/Form';\nimport Table from '../Components/Table';\nimport { addCurrencies, addExpenses, updateTotalExpenses } from '../actions';\nimport './wallet.css';\n\nclass Wallet extends Component {\n  constructor() {\n    super();\n\n    this.updateTotalValue = this.updateTotalValue.bind(this);\n    this.handleAddExpenses = this.handleAddExpenses.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.state = {\n      value: '',\n      description: '',\n      currency: 'USD',\n      method: 'Dinheiro',\n      tag: 'Alimentação',\n    };\n  }\n\n  componentDidMount() {\n    this.fetchingValuesCurrencys();\n  }\n\n  async fetchingValuesCurrencys() {\n    const { addCurrenciesDispatch } = this.props;\n    const fetching = await fetch('https://economia.awesomeapi.com.br/json/all');\n    const fetchingJson = await fetching.json();\n    const currencies = Object.keys(fetchingJson).filter(\n      (currency) => (currency !== 'USDT'),\n    );\n    addCurrenciesDispatch(currencies);\n    return fetchingJson;\n  }\n\n  handleChange({ target: { name, value } }) {\n    this.setState({ [name]: value });\n  }\n\n  async handleAddExpenses() {\n    const {\n      state,\n      props: { addExpensesDispatch, expenses },\n    } = this;\n    const currencys = await this.fetchingValuesCurrencys();\n\n    addExpensesDispatch(\n      { id: expenses.length, ...state, exchangeRates: { ...currencys } },\n    );\n    this.updateTotalValue(currencys);\n  }\n\n  updateTotalValue(currencys) {\n    const { value, currency } = this.state;\n    const { updateTotalExpensesDispatch, totalExpenses } = this.props;\n    const valueCoinSelected = currencys[currency].ask;\n    const valueMultiplyCoinSelected = Number((value * valueCoinSelected).toFixed([2]));\n    updateTotalExpensesDispatch(totalExpenses + valueMultiplyCoinSelected);\n  }\n\n  render() {\n    const { props: { email, currencies, totalExpenses }, state: {\n      value,\n      description,\n      currency,\n      method,\n      tag,\n    } } = this;\n\n    return (\n      <main className=\"wallet-page\">\n        <Header email={ email } totalExpenses={ totalExpenses } />\n        <section className=\"container-form\">\n          <Form\n            currencies={ currencies }\n            onChange={ this.handleChange }\n            value={ value }\n            description={ description }\n            currency={ currency }\n            method={ method }\n            tag={ tag }\n            onClick={ this.handleAddExpenses }\n          />\n        </section>\n        <section className=\"tables-container\">\n          <Table />\n        </section>\n      </main>\n    );\n  }\n}\n\nWallet.propTypes = {\n  email: PropTypes.string.isRequired,\n  expenses: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  currencies: PropTypes.arrayOf(PropTypes.string).isRequired,\n  totalExpenses: PropTypes.number.isRequired,\n  addExpensesDispatch: PropTypes.func.isRequired,\n  addCurrenciesDispatch: PropTypes.func.isRequired,\n  updateTotalExpensesDispatch: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    email: state.user.email,\n    expenses: state.wallet.expenses,\n    currencies: state.wallet.currencies,\n    totalExpenses: state.wallet.totalExpenses,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addExpensesDispatch: (state) => dispatch(addExpenses(state)),\n    addCurrenciesDispatch: (currencies) => dispatch(addCurrencies(currencies)),\n    updateTotalExpensesDispatch: (totalExpenses) => dispatch(\n      updateTotalExpenses(totalExpenses),\n    ),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wallet);\n"]},"metadata":{},"sourceType":"module"}